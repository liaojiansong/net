{{extend name="public:base" /}}
<!--标题-->
{{block name="title"}}
触发器列表
{{/block}}

<!--主体-->
{{block name="main"}}
<!-- 内容墙,包含顶部面板 -->
<div class="content-wrapper">
	<section class="content-header">
		<h1>
			触发器列表
		</h1>
		<ol class="breadcrumb">
			<li><a href="#"><i class="fa fa-dashboard"></i> 主页</a></li>
			<li><a href="#">触发器管理</a></li>
			<li class="active">触发器列表</li>
		</ol>
	</section>
	
	<!-- Main content -->
	<section class="content">
		<div class="row">
			<div class="col-xs-12">
				<div class="box">
					<div class="box-header">
						<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
							<form class="navbar-form navbar-left">
								<div class="form-group">
									<input type="text" class="form-control" placeholder="请输入设备的ID或名称">
								</div>
								<button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
							</form>
						</div>
					</div>
					<!-- /.box-header -->
					<div class="box-body">
						<table id="example1" class="table table-bordered table-hover text-center">
							<colgroup>
								<col class="col-md-2">
								<col class="col-md-1">
								<col class="col-md-2">
								<col class="col-md-3">
								<col class="col-md-2">
								<col class="col-md-1">
							</colgroup>
							<thead>
							<tr>
								<th class="text-center">触发器信息</th>
								<th class="text-center">触发条件</th>
								<th class="text-center">受控设备</th>
								<th class="text-center">报警方式</th>
								<th class="text-center">报警信息</th>
								<th class="text-center">操作</th>
							</tr>
							</thead>
							<tbody>
                            {{volist name='list' id='value'}}
								<tr>
									<td>
										<p>{{$value.trigger_name ?? nul}}</p>
										<p>数据模板:temp</p>
										<p>创建时间:{{$value.create_time ?? nul}}</p>
									</td>
									<td>{{$value.target_condition ?? nul}}</td>
									<td>
                                        <p>设备名称:{{$value.device.device_name ?? nul}}</p>
                                        <p>设备ID:{{$value.device.id ?? null}}</p>
                                    </td>
									<td>
                                        <p>{{$value.email ?? nul}}</p>
                                        <p>{{$value.phone ?? nul}}</p>
                                    </td>
                                    <td>
                                        <p>{{$value.report_msg ?? nul}}</p>
                                    </td>
									<td>
										<a class="btn btn-social-icon btn-default" data-toggle="tooltip" data-placement="top" title="编辑" href="{{:url('edit',['id'=>$value.id])}}"><i class="glyphicon glyphicon-edit"></i></a>
										<a class="btn btn-social-icon btn-default" data-toggle="tooltip" data-placement="top" title="删除" onclick="deleteAlert(`{{:url('trigger/delete')}}`,'{{$value.id}}',$(this))"><i class="glyphicon glyphicon-trash"></i></a>
									</td>
								
								</tr>
                                {{/volist}}
							</tbody>
						</table>
                        <div class="pull-right">
                            {{$list->render()}}
                        </div>
					</div>
					<!-- /.box-body -->
				</div>
			</div>
		</div>
	</section>
</div>
{{/block}}

{{block name="js"}}
<script>
    $(function () {
        info('{{$flag ?? 1}}');
    });
</script>

{{/block}}

