{{extend name="public:base" /}}
<!--页面标题-->
{{block name="title"}}
添加/编辑触发器
{{/block}}

{{block name="main"}}
<!-- 内容墙,包含顶部面板 -->
<div class="content-wrapper">
	<!-- Content Header (Page header) -->
	<section class="content-header">
		<h1>
            添加/编辑触发器
		</h1>
		<ol class="breadcrumb">
			<li><a href="#"><i class="fa fa-dashboard"></i> 主页</a></li>
			<li><a href="#">触发器管理</a></li>
			<li class="active">添加触发器</li>
		</ol>
	</section>
	
	<!-- Main content -->
	<section class="content">
		
		<!-- Default box -->
		<div class="box">
			<div class="box-body">
				<div class="row">
					<div class="col-xs-6 col-md-2">
					
					</div>
					<div class="col-xs-6 col-md-8">
                        {{include file="public/form-header" /}}
							<div class="box-body">
                                <input type="hidden" name="id">
                                <div class="form-group">
                                    <label for="device_id">设备id</label>
                                    <input type="text" class="form-control" name="device_id" id="device_id" value="{{$device_id ?? null}}" readonly>
                                </div>
								<div class="form-group">
									<label for="trigger_name">触发器名称</label>
									<input type="text" class="form-control" name="trigger_name"  id="trigger_name" data-rule="required;min:2">
								</div>
								<div class="form-group" style="margin-bottom: 30px">
									<label for="target_condition" class="icon-required">触发条件：</label>
									<div class="source-l">
										<span>选中数据流值</span> <select class="form-control" name="target_condition" id="target_condition">
										<option value=">">></option>
										<option value=">=" selected="selected">>=</option>
										<option value="<"><</option>
										<option value="<="><=</option>
										<option value="==">==</option>
										<option value="change">change</option>
									</select>
									<input type="text" class="form-control" id="trigger_value" name="trigger_value" placeholder="数据值" data-rule="required;number" />
									</div>
								</div>
								
								<div class="form-group">
									<label>报警方式:</label>
									<div class="form-group">
										<label>
											<input type="checkbox" class="flat-red" name="email_check"> <span style="margin-left: 1.5em">邮件</span>
										</label>
										<span style="margin-left: 2em"></span>
										<label>
										<input type="checkbox" class="flat-red" name="phone_check"> <span style="margin-left: 1.5em">短信</span>
										</label>
									</div>
								</div>
								<!--todo CheckBox填充-->
								<div class="form-group email">
									<label for="email">邮箱</label>
                                    <input type="email" class="form-control" id="email" name="email" data-rule="required;email">
								</div>
								<div class="form-group phone">
									<label for="phone">手机号</label>
                                    <input type="text" class="form-control" id="phone" name="phone" data-rule="required;mobile">
								</div>
								<div class="form-group">
									<label for="report_msg">报警信息</label>
                                    <input type="text" class="form-control" id="report_msg"  name="report_msg" data-rule="required">
								</div>
							</div>
                        {{include file="public/form-footer" /}}
					</div>
				</div>
				<div class="col-xs-6 col-md-2"></div>
			</div>
		</div>
		<!-- /.box -->
	
	</section>
	<!-- /.content -->
</div>
{{/block}}
{{block name="js"}}
<script>

    // $('input').iCheck('check', function () {
    //     alert('Well done, Sir');
    // });
    $(function () {
       popInput('{{$one ?? false}}');
        $('.email,.phone').hide();
        $('input').on('ifChecked', function (event) {
            let check_name = event.target.name;
            if (check_name === 'phone_check') {
                $('.phone').show();
            }

            if (check_name === 'email_check') {
                {
                    $('.email').show();
                }

            }
        });
        $('input').on('ifUnchecked', function (event) {
            let check_name = event.target.name;
            if (check_name === 'phone_check') {
                $('.phone').hide();
            }

            if (check_name === 'email_check') {
                {
                    $('.email').hide();
                }

            }
        });
    });

</script>
{{/block}}